(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["addlocation"],{1277:function(t,o,n){},"281e":function(t,o,n){"use strict";var c=n("a245"),a=n.n(c);a.a},"5d4f":function(t,o,n){"use strict";n.r(o);var c=function(){var t=this,o=t.$createElement,c=t._self._c||o;return c("div",[c("mgl-map",{ref:"map",staticClass:"c-map",attrs:{accessToken:t.accessToken,mapStyle:t.mapStyle},on:{click:function(o){t.addNewLocation(t.$el,o)},"update:mapStyle":function(o){t.mapStyle=o}}},[c("MglMarker",{attrs:{coordinates:t.coordinates,color:"red"}}),c("div",{staticClass:"c-arrow",on:{click:t.goBack}},[c("img",{attrs:{src:n("83d8"),alt:"back"}})])],1),c("form",{staticClass:"c-card",on:{submit:function(o){return o.preventDefault(),t.searchButton(o)}}},[c("h1",{staticClass:"c-card--title"},[t._v("Add Location")]),c("primary-button",{on:{click:t.searchButton}},[t._v(t._s(t.buttonText))])],1)],1)},a=[],e=(n("cadf"),n("551c"),n("097d"),n("d247")),i=(n("ac6d"),n("d1ca")),s={name:"AddLocation",data:function(){return{location:"",markers:[],accessToken:"pk.eyJ1IjoidGhpYmF1bHQ3IiwiYSI6ImNqbmxzOW9lYTE1ZGsza3M1aWRtNzg1NmkifQ.XdOPMxUfRUL7rVv2tG_3NA",mapStyle:"mapbox://styles/thibault7/cjr5i8iwk452v2srx7pg929ka",coordinates:[0,0]}},components:{MglMap:e["MglMap"],MglMarker:e["MglMarker"],PrimaryButton:i["a"]},computed:{buttonText:function(){return""==this.location?"Tap the map!":void 0==this.location?"Try another location":"Add ".concat(this.location)}},methods:{goBack:function(){this.$router.go(-1)},searchButton:function(){""==this.location?alert("Choose a location"):(console.log("selected town: "+this.location),this.searchLocation())},searchLocation:function(){var t=this,o="https://api.openweathermap.org/data/2.5/weather?q=".concat(this.location,"&units=metric&appid=83dec79fbb45d7ddc77f9657e7a41084");fetch(o).then(function(t){return t.json()}).then(function(o){console.log("DATA: "+o),t.$store.dispatch("addWeatherLocation",o)}).then(function(){t.$router.push("/weathercards")}).catch(function(t){console.error("An error occured: ",t)})},addNewLocation:function(t,o){console.log("clicked"),console.log("Element, ",t),console.log("Event, ",o),this.coordinates=[o.lngLat.lng,o.lngLat.lat];var n=this,c="https://api.opencagedata.com/geocode/v1/json?q=".concat(o.lngLat.lat,"+").concat(o.lngLat.lng,"&key=df386088e80840fc8452839031722474&language=en&pretty=1&no_annotations=1");fetch(c).then(function(t){return t.json()}).then(function(t){console.log("DATA: "+JSON.stringify(t)),void 0!==t.results[0].components.city_district?n.location=t.results[0].components.city_district:void 0!==t.results[0].components.town?n.location=t.results[0].components.town:n.location=t.results[0].components.city}).catch(function(t){console.error("An error occured: ",t)})}}},r=s,l=(n("281e"),n("2877")),u=Object(l["a"])(r,c,a,!1,null,null,null);u.options.__file="AddLocation.vue";o["default"]=u.exports},"5f0b":function(t,o,n){"use strict";var c=n("1277"),a=n.n(c);a.a},"83d8":function(t,o,n){t.exports=n.p+"img/Arrow-back.5e196fe1.svg"},a245:function(t,o,n){},ac6d:function(t,o,n){},d1ca:function(t,o,n){"use strict";var c=function(){var t=this,o=t.$createElement,n=t._self._c||o;return n("div",{staticClass:"c-button"},[n("button",{staticClass:"c-primary-button"},[t._t("default",[t._v("Button")])],2)])},a=[],e={name:"PrimaryButton"},i=e,s=(n("5f0b"),n("2877")),r=Object(s["a"])(i,c,a,!1,null,"74a3277a",null);r.options.__file="PrimaryButton.vue";o["a"]=r.exports}}]);
//# sourceMappingURL=addlocation.e7adbc4f.js.map